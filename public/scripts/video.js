$(document).ready(function () { var n = $("#player1"); n[0].removeAttribute("controls"), $(".control").show().css({ opacity: 1 }), $(".loading").fadeIn(500), $(".caption").fadeIn(500), n.on("loadedmetadata", function () { $(".caption").animate({ top: -45 }, 300), $(".current").text(d(0)), $(".duration").text(d(n[0].duration)), c(0, .7), setTimeout(o, 150), $(".vdbox").append('<div id="init"></div>').hover(function () { $(".control").stop().animate({ opacity: 1 }, 500), $(".caption").stop().animate({ top: 0 }, 500) }, function () { i || u || ($(".control").stop().animate({ opacity: 0 }, 500), $(".caption").stop().animate({ top: -45 }, 500)) }).on("click", function () { $("#init").remove(), $(".btnPlay").addClass("paused"), $(this).unbind("click"), n[0].play() }), $("#init").fadeIn(200) }); var o = function () { var e = n[0].buffered.end(0), t = n[0].duration, a = 100 * e / t; $(".bufferBar").css("width", a + "%"), e < t && setTimeout(o, 500) }; n.on("timeupdate", function () { var o = n[0].currentTime, e = 100 * o / n[0].duration; $(".timeBar").css("width", e + "%"), $(".current").text(d(o)) }), n.on("click", function () { e() }), $(".btnPlay").on("click", function () { e() }); var e = function () { n[0].paused || n[0].ended ? ($(".btnPlay").addClass("paused"), n[0].play()) : ($(".btnPlay").removeClass("paused"), n[0].pause()) }; $(".backward").on("click", function () { t(this, 1) }), $(".forward").on("click", function () { t(this, 3) }); var t = function (o, e) { $(".speed").removeClass("selected"), $(o).addClass("selected"), n[0].playbackRate = e, n[0].play() }; $(".btnStop").on("click", function () { $(".btnPlay").removeClass("paused"), s($(".progress").offset().left), n[0].pause(), n[0].currentTime = 1 }), $(".btnFS").on("click", function () { $.isFunction(n[0].webkitEnterFullscreen) ? n[0].webkitEnterFullscreen() : $.isFunction(n[0].mozRequestFullScreen) ? n[0].mozRequestFullScreen() : alert("Your browsers doesn't support fullscreen") }), $(".sound").click(function () { n[0].muted = !n[0].muted, $(this).toggleClass("muted"), n[0].muted ? $(".volumeBar").css("width", 0) : $(".volumeBar").css("width", 100 * n[0].volume + "%") }), n.on("canplay", function () { $(".loading").fadeOut(100) }); var a = !1; n.on("canplaythrough", function () { a = !0 }), n.on("ended", function () { $(".btnPlay").removeClass("paused"), n[0].pause() }), n.on("seeking", function () { a || $(".loading").fadeIn(200) }), n.on("seeked", function () { }), n.on("waiting", function () { $(".loading").fadeIn(200) }); var u = !1; $(".progress").on("mousedown", function (n) { u = !0, s(n.pageX) }), $(document).on("mouseup", function (n) { u && (u = !1, s(n.pageX)) }), $(document).on("mousemove", function (n) { u && s(n.pageX) }); var s = function (o) { var e = $(".progress"), t = n[0].duration, a = 100 * (o - e.offset().left) / e.width(); a > 100 && (a = 100), a < 0 && (a = 0), $(".timeBar").css("width", a + "%"), n[0].currentTime = t * a / 100 }, i = !1; $(".volume").on("mousedown", function (o) { i = !0, n[0].muted = !1, $(".sound").removeClass("muted"), c(o.pageX) }), $(document).on("mouseup", function (n) { i && (i = !1, c(n.pageX)) }), $(document).on("mousemove", function (n) { i && c(n.pageX) }); var c = function (o, e) { var t, a = $(".volume"); e ? t = 100 * e : t = 100 * (o - a.offset().left) / a.width(); t > 100 && (t = 100), t < 0 && (t = 0), $(".volumeBar").css("width", t + "%"), n[0].volume = t / 100, 0 == n[0].volume ? $(".sound").removeClass("sound2").addClass("muted") : n[0].volume > .5 ? $(".sound").removeClass("muted").addClass("sound2") : $(".sound").removeClass("muted").removeClass("sound2") }, d = function (n) { var o = Math.floor(n / 60) < 10 ? "0" + Math.floor(n / 60) : Math.floor(n / 60); return o + ":" + (Math.floor(n - 60 * o) < 10 ? "0" + Math.floor(n - 60 * o) : Math.floor(n - 60 * o)) } });